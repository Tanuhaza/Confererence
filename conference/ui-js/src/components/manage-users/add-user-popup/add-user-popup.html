<div class="pop-up-wrapper">
  <div class="pop-up pop-up_big">
    <h3 class="pop-up__title">add new user</h3>
    <button class="pop-up__close" ng-click="$ctrl.close()"></button>
    <form class="new-talk" name="$ctrl.userForm"
          novalidate
          ng-submit="$ctrl.addUser()">
      <label class="form-label form-label_required">
        role
      </label>
      <select class="new-talk__select"
              name="role-name"
              ng-required="true"
              ng-model="$ctrl.user.roleName"
              ng-options="role as (role | roleFilter) for role in $ctrl.roles">
      </select>

      <label for="add-user-name" class="form-label form-label_required">first name:</label>
      <input type="text" id="add-user-name" name="fname"
             class="field field_border"
             required
             maxlength="56"
             ng-model="$ctrl.user.fname">
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && $ctrl.userForm.fname.$error.required">
                All fields are mandatory. Please make sure all required fields are filled out</span>
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && $ctrl.userForm.fname.$error.maxlength">
                Your First Name should not be longer than 56 characters. Please try another</span>

      <label for="add-user-surname" class="form-label form-label_required">last name:</label>
      <input type="text" id="add-user-surname" name="lname"
             class="field field_border"
             required
             maxlength="56"
             ng-model="$ctrl.user.lname">
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && $ctrl.userForm.lname.$error.required">
                All fields are mandatory. Please make sure all required fields are filled out</span>
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && $ctrl.userForm.fname.$error.maxlength">
                Your Last Name should not be longer than 56 characters. Please try another</span>

      <label for="add-user-mail" class="form-label form-label_required">Email:</label>
      <input type="email" id="add-user-mail" name="mail"
             class="field field_border"
             required
             ng-model="$ctrl.user.mail"
             ng-pattern="$ctrl.emailPattern"
             ng-change="$ctrl.resetEmailAlreadyExists()">
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && $ctrl.userForm.mail.$error.required">
                All fields are mandatory. Please make sure all required fields are filled out</span>
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && ( $ctrl.userForm.mail.$error.pattern ||
                                                  $ctrl.userForm.mail.$error.email )">
                Please enter a valid email address</span>
      <span class="field-error"
            ng-show="$ctrl.userForm.mail.$error.email_already_exists">
                There is an existing account associated with {{$ctrl.user.mail}}</span>

      <label for="add-user-password" class="form-label form-label_required">password:</label>
      <input type="password" id="add-user-password" name="password"
             class="field field_border"
             required
             minlength="6"
             maxlength="30"
             ng-pattern="$ctrl.passwordPattern"
             ng-model="$ctrl.user.password"
             ng-change="$ctrl.setPasswordsMatch(true)">
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && $ctrl.userForm.password.$error.required">
                All fields are mandatory. Please make sure all required fields are filled out</span>
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && $ctrl.userForm.password.$error.pattern">
                Please use at least one non-space character in your password</span>
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && $ctrl.userForm.password.$error.minlength">
                Your password must be at least 6 characters long. Please try another</span>
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && $ctrl.userForm.password.$error.maxlength">
                Your password should not be longer than 30 characters. Please try another</span>

      <label for="confirm" class="form-label form-label_required">confirm password:</label>
      <input type="password" id="confirm" name="confirm"
             class="field field_border"
             required
             minlength="6"
             maxlength="30"
             ng-model="$ctrl.user.confirm"
             ng-change="$ctrl.setPasswordsMatch(true)">
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && $ctrl.userForm.confirm.$error.required">
                All fields are mandatory. Please make sure all required fields are filled out</span>
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && $ctrl.userForm.confirm.$error.minlength">
                Your password must be at least 6 characters long. Please try another</span>
      <span class="field-error"
            ng-show="$ctrl.userForm.$submitted && $ctrl.userForm.confirm.$error.maxlength">
                Your password should not be longer than 30 characters. Please try another</span>
      <span class="field-error"
            ng-show="$ctrl.userForm.confirm.$error.passwords_match">
                Passwords do not match</span>

      <input type="submit" class="sign-up__button btn" value="save" ng-disabled="$ctrl.formSent">
    </form>
  </div>
</div>